<!DOCTYPE html>
<html>
<head>
    <title>Log Viewer</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
        body { font-family: monospace; background: #111; color: #0f0; padding: 20px; }
        .log { margin-bottom: 30px; border: 1px solid #444; padding: 10px; background: #222; }
    </style>
</head>
<body>

    <h2>ðŸ“‚ Enter Folder Path to Load Logs</h2>
    <form method="POST" action="/scan">
        <input type="text" name="log_folder" placeholder="Enter folder path like D:\Logs\" size="60" required />
        <button type="submit">Scan Logs</button>
    </form>

    <h2>ðŸ“‚ Filter Logs</h2>
    <!-- âœ… FILTER FORM -->
    <form method="get" action="/">
        <input type="text" name="filename" placeholder="Filename contains..." value="{{ request.args.get('filename', '') }}">
        <input type="date" name="date" value="{{ request.args.get('date', '') }}">
        <label for="after">After:</label>
        <input type="datetime-local" id="after" name="after" value="{{ request.args.get('after', '') }}">
        <select name="sort">
            <option value="desc" {% if request.args.get('sort') == 'desc' %}selected{% endif %}>Newest First</option>
            <option value="asc" {% if request.args.get('sort') == 'asc' %}selected{% endif %}>Oldest First</option>
        </select>
        <button type="submit">Apply Filters</button>
    </form>

    <hr style="border-color: #555;">

    <h2>All Logs</h2>
    {% for log in logs %}
    <div class="log">
        <h4>{{ log.filename }}</h4>
        <p><strong>Timestamp:</strong> {{ log.timestamp }}</p>
        <pre>{{ log.content }}</pre>
    </div>
    {% endfor %}
  {% else %}
        <p>No logs found for the given filter.</p>
  {% endif %}
  {% endwith %}
</body>
</html>
